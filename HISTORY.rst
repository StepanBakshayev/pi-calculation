==============================
–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ ùõë –ø–æ —Ä–∞–∑—Ä—è–¥–∞–º
==============================


–ó–∞–¥–∞–Ω–∏–µ
=======

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã–≤–æ–¥–∞ n-–æ–π —Ü–∏—Ñ—Ä—ã –≤ —á–∏—Å–ª–µ –ü–∏

1. –ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—Å–µ—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏
   —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é n-–æ–π —Ü–∏—Ñ—Ä—ã.
2. –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
3. –í —Ç–∞–±–ª–∏—Ü–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ (–∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ,
   –æ—à–∏–±–∫–∞).
4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ.
5. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π
   –¥–æ–ª–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è —á–∏—Å–ª–æ –ü–∏ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ n –∑–Ω–∞–∫–æ–≤.


–ó–∞–ø—É—Å–∫
======

.. code-block:: sh

   $ aria2c -j 5 -x 5 http://buildbot.pypy.org/nightly/py3.6/pypy-c-jit-97722-6e344fc026c3-linux64.tar.bz2
   $ tar -xvf pypy-c-jit-97722-6e344fc026c3-linux64.tar.bz2
   $ pypy-c-jit-97722-6e344fc026c3-linux64/bin/pypy3 -m venv venv
   $ . venv/bin/activate
   $ pip install -U pip wheel setuptools pipenv
   $ pipenv sync
   $ yarn install
   $ npm run build
   $ python server.py

–û—Ç–∫—Ä—ã—Ç—å `–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <http://127.0.0.1:8080/>`_.


–•–æ–¥ —Ä–µ—à–µ–Ω–∏—è
===========

–ú–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –≤–∞—à–µ–≥–æ —ç–∫—Ä–∞–Ω–∞, —Ç–æ –µ—Å—Ç—å –∑–¥–µ—Å—å —Å–æ –º–Ω–æ–π –Ω–∞ —Ä–∞–±–æ—á–µ–º –º–µ—Å—Ç–µ –∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ù–µ
—Ö–æ—á—É, —á—Ç–æ –±—ã –¥–æ–±—Ä–æ –ø—Ä–æ–ø–∞–¥–∞–ª–æ –∑—Ä—è. –ü–ª—é—Å, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–≤ –º—ã—Å–ª—å –∏–ª–∏ —Ä–µ—à–µ–Ω–∏–µ –º–Ω–µ –ª–µ–≥—á–µ –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ. –ß–∏—Ç–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç "–∫—É–¥–∞
—É—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è" –≤ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–º–º–∏—Ç–æ–≤.

–í—ã–±—Ä–∞–Ω—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

 - –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä `pypy3.5 <http://buildbot.pypy.org/nightly/py3.5/pypy-c-jit-95404-ce637db93b36-linux64.tar.bz2>`_
 - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ `aiohttp <https://docs.aiohttp.org/en/stable/>`_
 - –∫–∞–Ω–∞–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è `WebSockets <https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API>`_
 - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á `multiprocessing.Queue <https://docs.python.org/3.5/library/multiprocessing.html#multiprocessing.Queuee>`_
 - –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏–∑ —ç–≤–µ–Ω—Ç–ª—É–ø–∞ –∏ –º—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞, —Ç–æ—á–Ω–æ –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞—é
 - —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö `sqlite3 <https://sqlite.org/index.html>`_
 - —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä –Ω–∞ —Ñ—Ä–æ–Ω—ç–Ω–¥–µ —Å –∫–æ–º–ø–∏–ª—è—Ü–∏–µ–π –≤ js `Monkberry <https://monkberry.js.org/>`_
 - `native browser api <https://developer.mozilla.org/en-US/docs/Web/API>`_ –¥–ª—è –≤—Å–µ–≥–æ –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –≤–æ —Ñ—Ä–æ–Ω—ç–Ω–¥–µ
 - `ES <https://www.ecma-international.org/publications/standards/Ecma-262.htm>`_ –∫–∞–∫–æ–π-—Ç–æ —Ç–∞–º

WebSockets –Ω–µ –±–∞–ª–∞–Ω—Å–∏—Ä—É—é—Ç—Å—è. –ú–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π –ª–æ–≥ –ø–æ–ª–∏–Ω–≥,
`Server-sent events <https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events>`_, –Ω–æ
`Edge UNDER CONSIDERATION <https://developer.microsoft.com/en-us/microsoft-edge/platform/status/serversenteventseventsource/?q=EventSource>`_.

Celery - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–∞–∫ —Ä–∞–∑ –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á. –ù–æ —è –µ–≥–æ –µ—â—ë –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –≤ —Ç–∞–∫–æ–º –∫–∞—á–µ—Å—Ç–≤–µ - —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Å—Ä–µ–¥—Å—Ç–≤–æ –≤—ã–Ω–æ—Å–∞
–¥–æ–ª–≥–∏—Ö –∑–∞–¥–∞—á –∏–∑ –±—ã—Å—Ç—Ä—ã—Ö –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ http
(`django views <https://docs.djangoproject.com/en/2.1/topics/http/views/>`_). –°–µ–π—á–∞—Å —è –Ω–µ –≥–æ—Ä—é –æ—Å–æ–±—ã–º –∂–µ–ª–∞–Ω–∏–µ–º
—Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Ç–æ–º, –∫–∞–∫ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å —ç—Ç–æ–π –æ—á–µ—Ä–µ–¥—å—é –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∑–∞–¥–∞–Ω–∏—è. –Ø —Ä–∞—Å—Å—Ç–∞–≤–∏–ª –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø–æ –¥—Ä—É–≥–æ–º—É.
–û—Å—Ç–∞–≤–ª—é celery –Ω–∞ –¥—Ä—É–≥–æ–π —Ä–∞–∑.


–ü–ª–∞–Ω
----

.. role:: strike

1. Web 1.0 –≤–µ—Ä—Å–∏—è

   –Ø –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π, —Ç–æ –µ—Å—Ç—å –Ω–µ —É—Ç–≤–µ—Ä–¥–∏–ª –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∫–∞–∫, —á—Ç–æ, –∑–∞—á–µ–º. –ù–∞—á–Ω—É —Å
   —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Å—Ç–∞—Ä–æ–º –¥–æ–±—Ä–æ–º —Å—Ç–∏–ª–µ —Å–µ—Ä–≤–µ—Ä-—Å–∞–π–¥ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ —Ä—É—á–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—ã. –¢–∞–∫ —è –ø—Ä–æ–¥–≤–∏–Ω—É—Å—å –ø–æ –∑–∞–¥–∞–Ω–∏—é,
   –≤—ã–±—Ä–æ—Å–∏–≤ –∏–∑ –Ω–µ–≥–æ `–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ`.

   –ñ–∞–ª—å, –Ω–æ –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –≤ aiohttp –Ω–µ—Ç csrf-–∑–∞—â–∏—Ç—ã. –Ø –Ω–∞—à–µ–ª —Ç–æ–ª—å–∫–æ `–∑–∞–±—Ä–æ—à–µ–Ω–Ω—É—é —Ä–∞–±–æ—Ç—É
   <https://github.com/asvetlov/aiohttp-csrf/tree/init>`_ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –±—Ä–∞–Ω—á–µ –±–µ–∑ –ø–∞–∫–µ—Ç–∞ –Ω–∞ pypi.

2. :strike:`–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è` –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è

   –Ø –Ω–µ —É–≤–∏–¥–µ–ª —Å–ª–æ–Ω–∞ –≤ –ø–æ—Å—É–¥–Ω–æ–π –ª–∞–≤–∫–µ. –ü—Ä–µ–∂–¥–µ —á–µ–º –æ–∂–∏–≤–ª—è—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ø–æ–º–æ—â—å—é js, –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏—è –ø–æ —Ö–æ–¥—É
   —Ä–∞—Å—á–µ—Ç–∞ –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ —á–∏—Å–ª–∞ –ø–∏. –ù–µ –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å, –∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è –∏
   —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ.

   –ü–æ —Ö–æ—Ä–æ—à–µ–º—É –Ω—É–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –¥–∞–º–ø –¥–∞–Ω–Ω—ã—Ö –≤ json –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å. –û–ø–µ—Ä–∞—Ü–∏—è —Ç–∞–∫–∞—è –∂–µ "–¥–æ—Ä–æ–≥–∞—è", –∫–∞–∫ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –°–∏–ª—ã
   –ø–æ–∫–∏–¥–∞—é—Ç –º–µ–Ω—è, —Å–¥–µ–ª–∞—é –∑–∞–¥–∞—á—É-–ø–æ–ª–ª–∏–Ω–≥ –≤ —Ü–∏–∫–ª–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞.

3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å–∏—è

   –Ø —É–∂–µ –Ω–µ —Ö–æ—á—É –∑–∞–≥–∞–¥—ã–≤–∞—Ç—å... –Ω–æ –≤–µ—Ä—é, —á—Ç–æ –ø–ª–∞–Ω –Ω–∞ —à–∞–≥–µ 2 –Ω–µ –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è.

   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ—Å—É—Ä—Å –ø–æ ws. –ü–æ –Ω–µ–º—É –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã. –î–µ–ª–æ –∑–∞ –º–∞–ª—ã–º: –≤–∑—è—Ç—å –¥–∞–Ω–Ω—ã–µ, –ø–µ—Ä–µ–¥–∞—Ç—å –≤ —à–∞–±–ª–æ–Ω,
   —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∑–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–æ–¥—ã –≤ –î–û–ú–µ.

4. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Ü–∏—Ñ—Ä—É

   –ù–µ –∑–∞–±—ã—Ç—å —Å–¥–µ–ª–∞—Ç—å.


Postmortem
==========

–ù–∞ –∑–∞–¥–∞–Ω–∏–µ –±—ã–ª–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ 16 h 4 min. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑ 2 —Å—Ç—Ä–∞–Ω–∏—Ü, 2 –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö
–æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ 2 –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ. –Ø –Ω–µ –∑–Ω–∞—é –∫–∞–∫ –º–µ–Ω—è –æ—Ü–µ–Ω—è—Ç, –Ω–æ —è –¥–æ–≤–æ–ª–µ–Ω –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ
–∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º. –í—Å–µ —á—Ç–æ —è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª –º–Ω–µ —É–¥–∞–ª–æ—Å—å –≤–æ–ø–ª–æ—Ç–∏—Ç—å –≤ –∫–æ–¥.
