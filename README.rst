==============================
–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ ùõë –ø–æ —Ä–∞–∑—Ä—è–¥–∞–º
==============================

–ó–∞–¥–∞–Ω–∏–µ
=======

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤—ã–≤–æ–¥–∞ n-–æ–π —Ü–∏—Ñ—Ä—ã –≤ —á–∏—Å–ª–µ –ü–∏

1. –ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Ç–∞–±–ª–∏—Ü—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –≤—Å–µ—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏
   —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é n-–æ–π —Ü–∏—Ñ—Ä—ã.
2. –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
3. –í —Ç–∞–±–ª–∏—Ü–µ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ (–∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ,
   –æ—à–∏–±–∫–∞).
4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–∞–∫–∂–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ.
5. –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–∞–±–ª–∏—Ü—ã –¥–æ–ª–∂–Ω–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π
   –¥–æ–ª–∂–Ω–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è —á–∏—Å–ª–æ –ü–∏ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–æ n –∑–Ω–∞–∫–æ–≤.


–ó–∞–ø—É—Å–∫
======

.. code-block:: sh

   $ aria2c -j 5 -x 5 http://buildbot.pypy.org/nightly/py3.7/pypy-c-jit-100194-4b803dfae562-linux64.tar.bz2
   $ tar -xvf pypy-c-jit-100194-4b803dfae562-linux64.tar.bz2
   $ pypy-c-jit-100194-4b803dfae562-linux64/bin/pypy3 -m venv venv3.7
   $ . venv3.7/bin/activate
   $ pip install -U pip wheel setuptools poetry
   $ poetry install
   $ npm install
   $ npm run build
   $ python server.py

–û—Ç–∫—Ä—ã—Ç—å `–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <http://localhost:50594/>`_.


–†–µ–∞–ª–∏–∑–∞—Ü–∏—è
==========

–ö–æ–Ω—Ü–µ–ø—Ü–∏—è
---------

–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ –ü–ò - —ç—Ç–æ –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∞—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è. –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ http-–∑–∞–ø—Ä–æ—Å–æ–≤ - —ç—Ç–æ –¥–æ—Ä–æ–≥–æ—Å—Ç–æ—è—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.
–û–±—Å–ª—É–∂–∏–≤–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, –≤—ã—á–∏—Å–ª—è–µ–º –ü–ò –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö (cpu).
–¢–∞–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –º–Ω–æ–≥–∏–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ –æ–¥–Ω–æ–≥–æ "–±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–∞" —è–≤–ª—è–µ—Ç—Å—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –≥–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –¢–æ—á–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±—É–¥–µ—Ç –°–£–ë–î –∏ –µ—ë –º–µ—Ö–∞–Ω–∏–∑–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π (``sqlalchemy.UniqueConstraint``).


–í–æ–ø–ª–æ—â–µ–Ω–∏–µ
----------

–ì–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–¥–µ–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã:

- —Å–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ http-–∑–∞–ø—Ä–æ—Å–æ–≤ (``eventloop``)
- –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–º –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ü–∏—Å–ª–∞ –ü–ò (``task_queue: multiprocessing.Queue``)
- —Å–æ–±—ã—Ç–∏–µ-—Å–∏–≥–Ω–∞–ª –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö (``database_updated: multiprocessing.Event``)
- –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ ``multiprocessing.cpu_count`` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (``workers: multiprocessing.Process``)
- –º–µ–Ω–µ–¥–∂–µ—Ä —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∫ –°–£–ë–î sqlite (``Session: sqlalchemy.<?>``)

–í –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ —Ä–∞–±–æ—Ç—ã sqlite –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü—É –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –° –ø–æ–º–æ—â—å—é –≤–∫–ª—é—á–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞ ``PRAGMA journal_mode=WAL`` –º–æ–∂–Ω–æ –∏–∑–±–µ–∂–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–π –æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ë–î.


–®—Ç—É—á–∫–∏
------

–î–ª—è —á–µ–ª–æ–≤–µ–∫–∞ "—Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –æ—á–µ—Ä–µ–¥–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å —á–∏—Å–ª–∞ –ü–ò" - —ç—Ç–æ –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è. –î–ª—è —Å–∏—Å—Ç–µ–º—ã - —ç—Ç–æ –∫–∞—Å–∫–∞–¥ –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤ –∏ —Å—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö.
–Ø –≤—ã–¥–µ–ª–∏–ª –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —ç—Ç–∞–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏:

- ``registred`` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ http-–∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏–Ω—è–ª –¥–∞–Ω–Ω—ã–µ, –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª –≤ –ë–î
- ``scheduled`` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ http-–∑–∞–ø—Ä–æ—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏–ª –≤ –æ—á–µ—Ä–µ–¥—å –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- ``taken`` - –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–±—Ä–∞–ª –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á—É –∏ –ø—Ä–∏—Å—Ç—É–ø–∏–ª –∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º
-  ``calculated`` - –ø—Ä–æ—Ü–µ—Å—Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–∏–ª—Å—è
- ``stored``- –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏—Å—Ç–∏–Ω—ã - –ë–î

–ö–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∞–ø–æ–≤ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –ø–æ—ç—Ç–æ–º—É –≤—ã–¥–µ–ª–µ–Ω–æ –º–µ—Å—Ç–æ –ø–æ–¥ –æ—à–∏–±–∫—É.

–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ "–∏—Å—á–µ–∑–∞—é—â–µ–≥–æ" —à–∞–±–ª–æ–Ω–∏–∑–∞—Ç–æ—Ä–∞ `Monkberry <https://monkberry.js.org/>`_ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞ –∏ websockets –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞.


–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
-----------

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ—ë —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö.

–î–ª—è –º–µ–Ω—è –¥–µ–º–æ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ç–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ) –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä—è–º –Ω–∞ 100% —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã–º –∏ –≤—ã–≤–µ—Ä–µ–Ω–Ω—ã–º.
–Ø —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –Ω–µ —Å—Ç–∞–ª –ø–∏—Å–∞—Ç—å –∫–æ–¥ –ø–µ—Ä–µ—Ä–∞—Å—á–∞—Ç–∞ (–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏) –≤ —Å–ª—É—á–∞–µ –ø–∞–¥–µ–Ω–∏—è. –î–∞–∂–µ –ø–∞–¥–µ–Ω–∏—è, –∫–∞–∫ –º–Ω–µ –∫–∞–∂–µ—Ç—Å—è –±—ã–ª–∏, –±—ã –Ω–∞ –Ω–∞ —Ä—É–∫—É - –æ–Ω–∏ –±—ã –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–±–æ—Ç—É —Å—Ç–∞—Ç—É—Å–æ–≤.
–û–¥–Ω–∞–∫–æ –Ω–∞ —Ä–∞–±–æ—Ç–µ —è –ø–æ –æ–±—ã–∫–Ω–æ–≤–µ–Ω–∏—é (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —ç—Ç–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç "–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞") –¥–æ–±–∞–≤–ª—è—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∑–∞–∫–∏–¥—ã–≤–∞–µ—Ç –≤ –æ—á–µ—Ä–µ–¥—å –Ω–µ–¥–æ–¥–µ–ª–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –ø—Ä–æ—à–ª–æ–≥–æ –ø–∞–¥–µ–Ω–∏—è-–æ—Å—Ç–∞–Ω–æ–≤–∫–∏.


–ñ—É—Ä–Ω–∞–ª –æ–∂–∏–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞
========================

–Ø –≤—Ä–µ–º—è –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Å—å –∫ –ø—Ä–æ–µ–∫—Ç—É –∏ –æ–±–Ω–æ–≤–ª—è—é –µ–≥–æ. –¢–µ–º–∞ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é, –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é –≤ –ø–∏—Ç–æ–Ω–µ –∏ –≤ –Ω–∞–≤—ã–∫–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ —Å–µ–π—á–∞—Å –æ–¥–Ω–∞ –∏–∑ –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö.
–ß—Ç–æ —ç—Ç–æ –≤—Å–µ —Ç–∞–∫ —Å–ø–æ—Ö–≤–∞—Ç–∏—Å—å —Å–µ–π—á–∞—Å? –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ —è –ø–∏—Å–∞–ª –≤ 2010-2011 –≥–æ–¥–∞—Ö —Å –ø–æ–¥–æ–±–Ω–æ–π –º–æ–¥–µ–ª—å—é. –≠—Ç–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ –±—É–¥–Ω–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –∑–∞ 1000$ –≤ –º–µ—Å—è—Ü (30000 —Ä—É–±–ª–µ–π) –±–µ–∑ –≤—Å—è–∫–∏—Ö —Ä–µ–≥–∞–ª–∏–π —Ç–∏–ø–∞ —Å–µ–Ω—å–æ—Ä, –∞—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä, —Ç–∏–º–ª–∏–¥, —Ç–µ—Ö–ª–∏–¥, 5-7-9 –ª–µ—Ç –æ–ø—ã—Ç–∞.


–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
--------------------

–Ø –≥–æ—Ç–æ–≤–∏–ª—Å—è –Ω–∞ –≤–∞–∫–∞–Ω—Å–∏—é –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ –≤ `HTMLAcademy <https://htmlacademy.ru/>`_ –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è–ª –∑–∞–¥–∞–Ω–∏—è –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–µ –æ–±—É—á–µ–Ω–∏—è-—Ç—Ä—É–¥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ `FSD Front-end education <https://www.fullstack-development.com/front-end-education>`_.
–†–µ—à–∏–ª: —Ö–≤–∞—Ç–∏—Ç —Å–æ–±–∏—Ä–∞—Ç—å js —Ä—É–∫–∞–º–∏! –ü–æ—Ä–∞ –ø—Ä–∏–∫—Ä—É—Ç–∏—Ç—å webpack.


–ù–µ—à—Ç–∞—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (1)
----------------------

–Ø –¥–æ–±–∞–≤–∏–ª –±–ª–æ–∫ ``finally``, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–ª –æ—Å—Ç–∞–Ω–æ–≤–∫—É –¥–æ—á–µ—Ä–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
–î–ª—è —Å–∏–≥–Ω–∞–ª–∞ –æ–± –æ—Å—Ç–∞–Ω–æ–≤–µ —è –≤—ã–±—Ä–∞–ª ``multiprocessing.Queue.close``::

  Indicate that no more data will be put on this queue by the current process. The background thread will quit once it has flushed all buffered data to the pipe. This is called automatically when the queue is garbage collected.

–Ø –∏—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–ª, —á—Ç–æ –º–µ—Ç–æ–¥ –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–æ—Å–∏–≥–Ω–∞–ª–∏—Ç –Ω–∞ –¥—Ä—É–≥–æ–π –∫–æ–Ω–µ—Ü –æ —Ç–æ–º, —á—Ç–æ –Ω–∏–∫–∞–∫–∏—Ö –±–æ–ª—å—à–µ –∑–∞–¥–∞—á –Ω–µ –±—É–¥–µ—Ç.
–¢–∞–∫ –≤–æ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ "—Å–æ–æ–±—â–µ–Ω–∏—è" –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–Ω—Ü–µ –æ—á–µ—Ä–µ–¥–∏ –Ω–µ –±—ã–ª–æ –ø–æ–ª—É—á–µ–Ω–æ. –ü—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–æ–¥–æ–ª–∂–∞–ª–∏ –≤–∏—Å–µ—Ç—å –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ ``multiprocessing.Queue.get``.
–í–æ–∑–º–æ–∂–Ω–æ –≥–¥–µ-—Ç–æ —Å–∏–¥–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ –∫–∞–∫-—Ç–æ –Ω—É–∂–Ω–æ –æ—Å–æ–±—ã–º –æ–±—Ä–∞–∑–æ–º –±—ã—Ç—å –æ–±—Ö–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º —Å Queue. –ù–∞ —Ç–∞–∫–∏–µ –º—ã—Å–ª–∏ –Ω–∞—Ç–∞–ª–∫–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—è `The tragic tale of the deadlocking Python queue <https://codewithoutrules.com/2017/08/16/concurrency-python/>`_.
–Ø –Ω–µ —Å—Ç–∞–ª —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ —Ç–∞–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ —Å—Ç–∞–≤–∏–ª –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π —Ü–µ–ª—å—é –æ—Ç–ª–∞–¥–∫–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞ –≤–æ –∏–º—è –¥–æ–±—Ä–∞ –∏ —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç–∏.
``terminate`` —Ä–∞—Å—à–µ–≤–µ–ª–∏–ª –ø—Ä–æ—Ü–µ—Å—Å—ã.


–ù–µ—à—Ç–∞—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (2)
----------------------

–û–±–Ω–æ–≤–∏–ª sqlalchemy —Å 1.2 –¥–æ 1.3 - –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤—ã–±–æ—Ä–∫–∏.
–°–ø–∏—Å–æ–∫ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏—Ö–æ–¥–∏—Ç, –Ω–æ —Ä–∞–±–æ—Ç–∞ –≤—Å–µ–≥–¥–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ ``registered``. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
–Ø –ø—Ä–æ–≤–µ–ª–∏ –¥–∞–Ω–Ω—ã–µ - —Ç–∞–º –≤—Å–µ –µ—Å—Ç—å. –ü–æ–ø—Ä–æ—Å–∏–ª sqlalchemy –ø–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø—Ä–æ—Å - –æ–Ω —Ç–∞–∫–æ–π, –∫–∞–∫–∏–º —è –æ–∂–∏–¥–∞–ª —É–≤–∏–¥–µ—Ç—å.
–Ø –º–æ–≥—É –ø–∏—Å–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã SQL, —è –º–æ–≥—É –≤–∑—è—Ç—å –Ω–∞ –≤–æ–æ—Ä—É–∂–µ–Ω–∏–µ –º–Ω–æ–≥–æ–æ–±—Ä–∞–∑–Ω—ã–µ ORM (ActiveRecord). –ù–æ —ç—Ç–æ –≤—Å–µ–≥–¥–∞ –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–¥–∞—á–∏. –í–æ—Ç –∏ —Å–µ–π—á–∞—Å –ø—Ä–∏—à–ª–æ—Å—å –µ—â—ë —á—É—Ç—å —á—É—Ç—å –≥–ª—É–±–∂–µ –∫–∞–ø–Ω—É—Ç—å –≤ SQL, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–æ–∏—Ö –Ω–∞–≤—ã–∫–æ–≤ –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ.

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å–æ—Å—Ç–æ—è–ª –∏–∑ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π —Å –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–Ω–∞–∫—É - –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –ø–æ –∑–Ω–∞–∫—É. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É:

.. code-block:: py

    results = (session
        .query(DigitNumber.digit_number, Event.progress, Event.result)
        .join(Event)
        .group_by(DigitNumber)
        .order_by(-DigitNumber.digit_number, -Event.progress))

.. code-block:: sql

   SELECT digit_number.digit_number AS digit_number_digit_number, event.progress AS event_progress, event.result AS event_result 
   FROM digit_number JOIN event ON digit_number.digit_number = event.digit_number GROUP BY digit_number.digit_number ORDER BY -digit_number.digit_number, -event.progress


–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–ª—é—á–∞–ª–æ—Å—å –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ ``.having(Event.progress == func.MAX(Event.progress))``, —á—Ç–æ –± –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –¥–≤–∏–∂–æ–∫ –≤–µ—Ä–Ω—É–ª "—Å–∞–º—ã–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å". –†–µ–∑—É–ª—å—Ç–∞—Ç:

.. code-block:: sql

   SELECT digit_number.digit_number AS digit_number_digit_number, event.progress AS event_progress, event.result AS event_result 
   FROM digit_number JOIN event ON digit_number.digit_number = event.digit_number GROUP BY digit_number.digit_number 
   HAVING event.progress = max(event.progress) ORDER BY -digit_number.digit_number


–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥
================

–í—Å–µ–≥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –Ω–∞ –ø–æ—Ç–æ–º. –í—Å–µ–≥–¥–∞ –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç —Ö–∞–∫–Ω—É—Ç—å –∏ –≤–∞—Ä–∏–∞–Ω—Ç —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –∏ –ø–æ–¥–æ–±—Ä–∞—Ç—å –≤–µ—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (hacker vs developer). –í–æ—Ç –º–æ–π —Å–ø–∏—Å–æ–∫ –¥–æ–ª–≥–∞ –ø–µ—Ä–µ–¥ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π.


–ì–¥–µ –∂–µ –≤–∏—Å—è—Ç –≤–æ—Ä–∫–µ—Ä—ã, –∫–æ–≥–¥–∞ –ø–æ—Ä—Ç –∑–∞–Ω—è—Ç –∏ –±–µ–∑ –∑–∞–¥–∞—á –Ω—É–∂–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç—å
-----------------------------------------------------------------

–°–º "–ù–µ—à—Ç–∞—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (1)". –í —Å—Ç–∞—Ç—å–µ –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ø—Ä–æ—Ü–µ—Å—Å—É –¥–µ–±–∞–≥–≥–µ—Ä–æ–º.
–í–æ–∑–º–æ–∂–Ω–æ "–ª—É—á—à–µ–≥–æ" —Å–ø–æ—Å–æ–±–∞ –∏ –Ω–µ –±—É–¥–µ—Ç. –ó–∞ —Ç–æ –ø–æ—è–≤–∏—Ç—Å—è –≥–ª—É–±–æ–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –Ω–∞–≤—ã—Ö –æ—Ç–ª–∞–¥–∫–∏ –ø–∏—Ç–æ–Ω–∞.


–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
-----------

–î–∞–≤–Ω—è—è –º–æ—è –±–æ–ª—å–Ω–∞—è –º–æ–∑–æ–ª—å. –î–ª—è –º–µ–Ω—è –±—ã–ª–æ –ø—Ä–æ–±–ª–µ–º–æ–π –≤–æ–æ–±—â–µ –≤–∫–ª—é—á–∏—Ç—å –≤—ã–≤–æ–¥ "access logs" –¥–ª—è aiohttp. –Ø –ø–æ–Ω–∏–º–∞—é –∏–µ—Ä–∞—Ä—Ö–∏—é, –º–æ—Ç–∏–≤–∞—Ü–∏—é –ø—Ä–∏–Ω—Ç–æ—Ä–æ–≤-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏–µ—Ä–∞—Ä—Ö–∏–∏ —É—Ä–æ–≤–Ω–µ–π. –ù–æ –∫–∞–∫ —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å - –Ω–µ—Ç.
–Ø –¥–æ —Å–∏—Ö –ø–æ—Ä –∏—Å–∫—Ä–µ–Ω–Ω–µ –∏–∑—É–º–ª—è—é—Å—å –ø–æ –∫–∞–∫–æ–π –ø—Ä–∏—á–∏–Ω–µ –Ω—É–∂–Ω–æ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ –∑–∞–±–∞–±–∞—Ö–∞—Ç—å ``logging.basicConfig(level=logging.DEBUG)``, –∞ –ø–æ—Ç–æ–º –æ–Ω–æ —É–∂–µ –Ω–µ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞.

–° –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–∞ –µ—â—ë –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø—Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–ª–∞, –Ω–æ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ - –≤—ã–±–æ—Ä–∫–µ –¥–∞–Ω–Ω—ã—Ö. –°–º "–ù–µ—à—Ç–∞—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (2)". –ü–æ —Ö–æ—Ä–æ—à–µ–º—É –Ω—É–∂–Ω–æ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ª–æ–≥–∏ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∂–∏–∑–Ω–µ–¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–æ—Ä–∫–µ—Ä–æ–≤.


–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
------------

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–±–æ—Ç–µ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–ª—è –º–µ–Ω—è –ø—Ä–æ–±–ª–µ–º–æ–π. –Ø –¥–µ–ª–∞—é –∏—Ö –ø–æ —Å–≤–æ–µ–π –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–µ.
–î–∞–∂–µ —Ç–∞–∫: —è –Ω–µ —Å—á–∏—Ç–∞—é, —á—Ç–æ —è –≤—ã–ø–æ–ª–Ω–∏–ª —Ä–∞–±–æ—Ç—É, –µ—Å–ª–∏ –Ω–µ –ø–æ—Å—Ç–∞–≤–∏–ª —Ç–µ—Å—Ç–æ–≤.
–Ø –ø—Ä–µ–¥–æ–¥–µ–≤–∞–ª —Ä–∞–∑–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ –Ω–∞ –ø—É—Å—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –¢–∏–ø–∞ "–∫–æ—Ä—É—Ç–∏–Ω–∞ —Å–æ–∑–¥–∞–Ω–∞ –Ω–µ –≤ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ, –∫–æ—Ä—É—Ç–∏–Ω–∞ —Å–æ–∑–¥–∞–Ω–∞ –Ω–µ –≤ —ç—Ç–æ–º —ç–≤–µ–Ω—Ç–ª—É–ø–µ". –ù–æ –¥–ª—è –¥–µ–º–æ –ø—Ä–æ–µ–∫—Ç–∞ —É –º–µ–Ω—è –ø–æ–∫–∞ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –º–æ—Ç–∏–≤–∞—Ü–∏–∏ –≤–∫–ª—é—á–∞—Ç—å —Ç–µ—Å—Ç—ã.


–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ websocket
---------------------------

–ù–µ –∑–Ω–∞—é –æ—Ç–Ω–µ—Å—Ç–∏ –ª–∏ –ø—Ä–æ–±–ª–µ–º—É –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—é –∏–ª–∏ –∫ –¥–æ–ª–≥—É.

